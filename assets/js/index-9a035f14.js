import{s as e}from"./element-china-area-data@6.0.0-dd08f211.js";import{M as s}from"./map-d6b1e3c9.js";import{E as t}from"./element-plus@2.7.8_vue@3.2.47-1d849cc7.js";import{d as r,f as l,z as i,o,G as a,C as d,b as n,M as c,a as p,E as u,c as m,F as f,L as _,am as v,al as j}from"./@vue_runtime-core@3.2.47-bf569810.js";import{a as h,u as g}from"./@vue_reactivity@3.2.47-1ea676b1.js";import{P as w}from"./@vue_shared@3.2.47-8eebffec.js";import{_ as y}from"./index-cf586f42.js";import"./lodash-es@4.17.21-dc611046.js";import"./@vueuse_shared@9.13.0_vue@3.2.47-910bcaaa.js";import"./@vueuse_core@9.13.0_vue@3.2.47-e446a256.js";import"./@vue_runtime-dom@3.2.47-dde34704.js";import"./@element-plus_icons-vue@2.3.1_vue@3.2.47-46650e37.js";import"./@sxzz_popperjs-es@2.11.7-b78c3215.js";import"./@ctrl_tinycolor@3.6.0-142ab585.js";import"./dayjs@1.11.7-241834cb.js";import"./@intlify_core-base@9.2.2-0528b302.js";import"./@intlify_message-compiler@9.2.2-e2e032fa.js";import"./@intlify_shared@9.2.2-eb5ba5c2.js";import"./source-map@0.6.1-f5811eb2.js";import"./@intlify_devtools-if@9.2.2-c4c7726f.js";import"./async-validator@4.2.5-cf877c1f.js";import"./memoize-one@6.0.0-63ab667a.js";import"./normalize-wheel-es@1.2.0-3222b0a2.js";import"./@floating-ui_dom@1.2.7-0180cacd.js";import"./@floating-ui_core@1.2.6-eb72d81f.js";import"./pinia@2.0.33_typescript@5.0.4_vue@3.2.47-d6789b52.js";import"./vue-demi@0.14.0_vue@3.2.47-71ba0ef2.js";import"./@vue_devtools-api@6.5.0-d955f204.js";import"./vue-router@4.1.6_vue@3.2.47-cb210afc.js";import"./js-cookie@3.0.1-d59fc71c.js";import"./axios@1.3.4-e3d92af1.js";import"./vite-plugin-qiankun@1.0.15_typescript@5.0.4_vite@4.3.9_@types_node@20.1.1_sass@1.62.0_terser@5.17.2_-f25e2b71.js";import"./nprogress@0.2.0-0d47f636.js";import"./@element-plus_icons-vue@2.1.0_vue@3.2.47-39d0b937.js";import"./ant-design-vue@4.2.5_vue@3.2.47-6df9359a.js";import"./resize-observer-polyfill@1.5.1-3b32e109.js";import"./@babel_runtime@7.21.5-f3180b7b.js";import"./@ant-design_icons-vue@7.0.1_vue@3.2.47-d28e270c.js";import"./@ant-design_icons-svg@4.4.2-242d2267.js";import"./@ant-design_colors@6.0.0-6d00c5a2.js";import"./throttle-debounce@5.0.2-ba017292.js";import"./vue-types@3.0.2_vue@3.2.47-6bcea8eb.js";import"./@emotion_hash@0.9.2-32e4a972.js";import"./@emotion_unitless@0.8.1-6ad1c55b.js";import"./stylis@4.3.4-cd94ce99.js";import"./dom-align@1.12.4-430184c7.js";import"./vue-marquee-text-component@2.0.1-4b6d12fd.js";import"./vue@3.2.47-c2cc0741.js";import"./vue-i18n@9.2.2_vue@3.2.47-27f33b06.js";import"./pinia-plugin-persistedstate@3.1.0_pinia@2.0.33_typescript@5.0.4_vue@3.2.47_-d2bd58cf.js";import"./echarts@5.4.2-f2ea7978.js";import"./tslib@2.3.0-a4e99503.js";import"./zrender@5.4.3-b1e59f6a.js";import"./@wocwin_t-ui-plus@2.0.3_element-plus@2.7.8_vue@3.2.47__vue@3.2.47-8d8e0407.js";import"./sortablejs@1.15.0-c3bad686.js";const C={success:!0,code:200,msg:"成功",data:[{fullAddress:"广东省广州市白云区云城街道连元桥社区居委会",address:"连元桥社区居委会",center:[113.263084,23.189885]},{fullAddress:"广东省广州市白云区石井街道兴隆社区居委会",address:"兴隆社区居委会",center:[113.211351,23.20097]},{fullAddress:"广东省广州市白云区松洲街道团结社区居委会",address:"团结社区居委会",center:[113.221272,23.15016]},{fullAddress:"广东省广州市白云区京溪街道东圣社区居委会",address:"东圣社区居委会",center:[113.31866,23.182201]},{fullAddress:"广东省广州市白云区永平街道新顺社区居委会",address:"新顺社区居委会",center:[113.29759,23.229802]},{fullAddress:"广东省广州市白云区均禾街道石马西桥社区居委会",address:"石马西桥社区居委会",center:[113.254039,23.263766]},{fullAddress:"广东省广州市白云区龙归街道夏良村委会",address:"夏良村委会",center:[113.303901,23.284493]},{fullAddress:"广东省广州市白云区大源街道大源村委会",address:"大源村委会",center:[113.349533,23.246114]},{fullAddress:"广东省广州市白云区太和镇谢家庄村委会",address:"谢家庄村委会",center:[113.355092,23.302582]},{fullAddress:"广东省广州市白云区太和镇白山村委会",address:"白山村委会",center:[113.408844,23.270603]},{fullAddress:"广东省广州市白云区太和镇穗丰村委会",address:"穗丰村委会",center:[113.463849,23.263471]},{fullAddress:"广东省广州市白云区钟落潭镇华坑村委会",address:"华坑村委会",center:[113.470984,23.316239]},{fullAddress:"广东省广州市白云区钟落潭镇光明村委会",address:"光明村委会",center:[113.416386,23.335187]},{fullAddress:"广东省广州市白云区钟落潭镇大纲领村委会",address:"大纲领村委会",center:[113.355644,23.354784]},{fullAddress:"广东省广州市白云区人和镇人和村委会",address:"人和村委会",center:[113.302742,23.34226]},{fullAddress:"广东省广州市白云区江高镇水沥村委会",address:"水沥村委会",center:[113.236045,23.311932]},{fullAddress:"广东省广州市白云区江高镇沙溪村委会",address:"沙溪村委会",center:[113.199457,23.273745]},{fullAddress:"广东省广州市白云区江高镇五丰村委会",address:"五丰村委会",center:[113.179501,23.328767]},{fullAddress:"广东省广州市白云区钟落潭镇钟落潭村委会",address:"钟落潭村委会",center:[113.397315,23.385558]},{fullAddress:"广东省广州市白云区钟落潭镇马沥村委会",address:"马沥村委会",center:[113.450162,23.392222]}]},A=e=>(v("data-v-7575ff4d"),e=e(),j(),e),x=A((()=>n("div",{id:"container"},null,-1))),b={class:"input-card"},k={key:0,style:{"margin-left":"5px","font-size":"14px"}},V={style:{color:"#355db4"}},L={class:"input-item"},z=A((()=>n("span",{class:"input-item-text"},"省市区",-1))),O={class:"input-item"},B=A((()=>n("span",{class:"input-item-text"},"店面覆盖范围",-1))),M={class:"input-item"},S=A((()=>n("span",{class:"input-item-text"},"框圈显示",-1))),D={key:0,class:"concrete"},F={class:"address_content"},E=r({name:"DemoCircle"}),I=y(r({...E,setup(r){const v=h({regionData:e,activeName:"1",lnglat:"",
// 经纬度
selectedOptions:[],radius:null,
// 半径
map:null,scale:null,
// 比例尺
controlBar:null,
// 工具条方向盘
toolBar:null,
// 工具条
overView:null,
// 鹰眼
circleList:[],
// 圆圈数据
circles:[],addressList:[],
// 选址地点
isShowCircle:!1});l((()=>{j()}));const j=()=>{s().then((e=>{v.scale=new e.Scale,v.toolBar=new e.ToolBar({position:{top:"110px",right:"40px"}}),v.controlBar=new e.ControlBar({position:{top:"10px",right:"10px"}}),v.overView=new e.HawkEye({opened:!1}),v.map=new e.Map("container",{
// resizeEnable: true,
viewMode:"3D",zoom:12,center:[113.265862,23.126124]}),v.map.setDefaultCursor("pointer"),v.map.on("click",(e=>{v.lnglat=e.lnglat.getLng()+","+e.lnglat.getLat()})),v.map.addControl(v.scale),v.map.addControl(v.toolBar),v.map.addControl(v.controlBar),v.map.addControl(v.overView)}))},y=()=>{v.isShowCircle?v.circleList.map((e=>{e.show()})):v.circleList.map((e=>{e.hide()}))},A=async()=>{if(!(v.selectedOptions.length>0))return void t.error("请先选择定位区域！");if(!v.radius)return void t.error("请输入店面覆盖范围！");v.selectedOptions[v.selectedOptions.length-1],v.radius;const e=await C;e.success&&(v.map.clearMap(),v.circles=e.data,v.circles.length>0&&(await I(),await E(),await U(),await y()),s().then((e=>{let s;v.selectedOptions.length>0&&(s=v.selectedOptions[v.selectedOptions.length-1]),new e.DistrictSearch({
// 返回行政区边界坐标等具体信息
extensions:"all",
// 设置查询行政区级别为 区
level:"district"}).search(s,((s,t)=>{let r=t.districtList[0].boundaries;if(r){for(let s=0,t=r.length;s<t;s++)new e.Polygon({map:v.map,strokeWeight:1,path:r[s],fillOpacity:.7,fillColor:"#CCF3FF",strokeColor:"#CC66CC"});v.map.setFitView()}}))})))},E=()=>{for(let e=0;e<v.circles.length;e+=1){let t=v.circles[e].center;s().then((s=>{let r=new s.Marker({position:t,offset:new s.Pixel(0,-9),anchor:"center",title:`${v.circles[e].fullAddress}`,zIndex:102});v.map.add(r)}))}},I=()=>{v.circleList=[];for(let e=0;e<v.circles.length;e+=1){let t=v.circles[e].center;s().then((e=>{let s=new e.Circle({center:t,
// radius: state.radius - 0,  // 半径
radius:1e3*(v.radius-0)/2,
// 半径
strokeColor:"#F33",
// 线颜色
// strokeColor: state.rgb(),  // 线颜色
zIndex:101,strokeOpacity:1,
//线透明度
strokeWeight:3,
//线粗细度
bubble:!0,
// 是否将覆盖物的鼠标或touch等事件冒泡到地图上
fillColor:"#7c7cfb",
//填充颜色
fillOpacity:.35});s.setMap(v.map),v.circleList.push(s)}))}},U=()=>{v.addressList=[];for(let e=0;e<v.circles.length;e+=1){let t=v.circles[e].center;s().then((e=>{new e.Geocoder({city:"020",
//城市设为广州，默认：“全国”
radius:1e3*(v.radius-0)/2}).getAddress(t,((e,s)=>{"complete"===e&&s.regeocode&&v.addressList.push(s.regeocode.formattedAddress)}))}))}};return(s,t)=>{const r=i("el-cascader"),l=i("el-input"),j=i("el-checkbox"),h=i("el-button"),C=i("el-collapse-item"),E=i("el-collapse"),I=i("t-layout-page");return o(),a(I,{class:"circle-demo"},{default:d((()=>[x,n("div",b,[n("label",null,[c(" 店面选址测算 "),g(v).circles.length>0?(o(),p("span",k,[c(" 共计 "),n("span",V,w(g(v).circles.length),1),c(" 个选址 ")])):u("",!0)]),n("div",L,[z,m(r,{style:{width:"100%"},placeholder:"请选择省市区",filterable:"",props:{checkStrictly:!0},options:g(e),modelValue:g(v).selectedOptions,"onUpdate:modelValue":t[0]||(t[0]=e=>g(v).selectedOptions=e)},null,8,["options","modelValue"])]),n("div",O,[B,m(l,{placeholder:"请输入店面覆盖范围",clearable:"",modelValue:g(v).radius,"onUpdate:modelValue":t[1]||(t[1]=e=>g(v).radius=e)},{append:d((()=>[c("公里")])),_:1},8,["modelValue"])]),n("div",M,[S,m(j,{style:{width:"100%"},modelValue:g(v).isShowCircle,"onUpdate:modelValue":t[2]||(t[2]=e=>g(v).isShowCircle=e),onChange:y},{default:d((()=>[c("显示覆盖范围")])),_:1},8,["modelValue"])]),m(h,{type:"primary",style:{width:"100%","margin-bottom":"5px"},onClick:A},{default:d((()=>[c("选址测算")])),_:1}),g(v).circles.length>0?(o(),p("div",D,[m(E,{modelValue:g(v).activeName,"onUpdate:modelValue":t[3]||(t[3]=e=>g(v).activeName=e)},{default:d((()=>[m(C,{title:"具体店面地址",name:"1"},{default:d((()=>[n("ul",F,[(o(!0),p(f,null,_(g(v).circles,((e,s)=>(o(),p("li",{class:"info t-oneline-overflow-hidden",key:s},w(e.fullAddress),1)))),128))])])),_:1})])),_:1},8,["modelValue"])])):u("",!0)])])),_:1})}}}),[["__scopeId","data-v-7575ff4d"],["__file","index.vue"]]);export{I as default};
