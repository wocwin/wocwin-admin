function t(t){return t.split("-")[1]}function e(t){return"y"===t?"height":"width"}function n(t){return t.split("-")[0]}function o(t){return["top","bottom"].includes(n(t))?"x":"y"}function i(i,a,r){let{reference:l,floating:s}=i;const c=l.x+l.width/2-s.width/2,f=l.y+l.height/2-s.height/2,m=o(a),u=e(m),g=l[u]/2-s[u]/2,p="x"===m;let y;switch(n(a)){case"top":y={x:c,y:l.y-s.height};break;case"bottom":y={x:c,y:l.y+l.height};break;case"right":y={x:l.x+l.width,y:f};break;case"left":y={x:l.x-s.width,y:f};break;default:y={x:l.x,y:l.y}}switch(t(a)){case"start":y[m]-=g*(r&&p?-1:1);break;case"end":y[m]+=g*(r&&p?-1:1)}return y}const a=async(t,e,n)=>{const{placement:o="bottom",strategy:a="absolute",middleware:r=[],platform:l}=n,s=r.filter(Boolean),c=await(null==l.isRTL?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:a}),{x:m,y:u}=i(f,o,c),g=o,p={},y=0;for(let d=0;d<s.length;d++){const{name:n,fn:r}=s[d],{x:x,y:h,data:w,reset:b}=await r({x:m,y:u,initialPlacement:o,placement:g,strategy:a,middlewareData:p,rects:f,platform:l,elements:{reference:t,floating:e}});m=null!=x?x:m,u=null!=h?h:u,p={...p,[n]:{...p[n],...w}},b&&y<=50&&(y++,"object"==typeof b&&(b.placement&&(g=b.placement),b.rects&&(f=!0===b.rects?await l.getElementRects({reference:t,floating:e,strategy:a}):b.rects),({x:m,y:u}=i(f,g,c))),d=-1)}return{x:m,y:u,placement:g,strategy:a,middlewareData:p}};function r(t){return"number"!=typeof t?(e=t,{top:0,right:0,bottom:0,left:0,...e}):{top:t,right:t,bottom:t,left:t};var e}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:a,rects:s,elements:c,strategy:f}=t,{boundary:m="clippingAncestors",rootBoundary:u="viewport",elementContext:g="floating",altBoundary:p=!1,padding:y=0}=e,d=r(y),x=c[p?"floating"===g?"reference":"floating":g],h=l(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(x)))||n?x:x.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(c.floating)),boundary:m,rootBoundary:u,strategy:f})),w="floating"===g?{...s.floating,x:o,y:i}:s.reference,b=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c.floating)),v=await(null==a.isElement?void 0:a.isElement(b))&&await(null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},R=l(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:b,strategy:f}):w);return{top:(h.top-R.top+d.top)/v.y,bottom:(R.bottom-h.bottom+d.bottom)/v.y,left:(h.left-R.left+d.left)/v.x,right:(R.right-h.right+d.right)/v.x}}const c=Math.min,f=Math.max;function m(t,e,n){return f(t,c(e,n))}const u=n=>({name:"arrow",options:n,async fn(i){const{element:a,padding:l=0}=n||{},{x:s,y:c,placement:f,rects:u,platform:g,elements:p}=i;if(null==a)return{};const y=r(l),d={x:s,y:c},x=o(f),h=e(x),w=await g.getDimensions(a),b="y"===x,v=b?"top":"left",R=b?"bottom":"right",A=b?"clientHeight":"clientWidth",E=u.reference[h]+u.reference[x]-d[x]-u.floating[h],P=d[x]-u.reference[x],k=await(null==g.getOffsetParent?void 0:g.getOffsetParent(a));let T=k?k[A]:0;T&&await(null==g.isElement?void 0:g.isElement(k))||(T=p.floating[A]||u.floating[h]);const D=E/2-P/2,O=y[v],L=T-w[h]-y[R],B=T/2-w[h]/2+D,S=m(O,B,L),C=null!=t(f)&&B!=S&&u.reference[h]/2-(B<O?y[v]:y[R])-w[h]/2<0;return{[x]:d[x]-(C?B<O?O-B:L-B:0),data:{[x]:S,centerOffset:B-S}}}});["top","right","bottom","left"].reduce(((t,e)=>t.concat(e,e+"-start",e+"-end")),[]);const g={left:"right",right:"left",bottom:"top",top:"bottom"};function p(t){return t.replace(/left|right|bottom|top/g,(t=>g[t]))}const y={start:"end",end:"start"};function d(t){return t.replace(/start|end/g,(t=>y[t]))}const x=function(i){return void 0===i&&(i={}),{name:"flip",options:i,async fn(a){var r;const{placement:l,middlewareData:c,rects:f,initialPlacement:m,platform:u,elements:g}=a,{mainAxis:y=!0,crossAxis:x=!0,fallbackPlacements:h,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...R}=i,A=n(l),E=n(m)===m,P=await(null==u.isRTL?void 0:u.isRTL(g.floating)),k=h||(E||!v?[p(m)]:function(t){const e=p(t);return[d(t),e,d(e)]}(m));h||"none"===b||k.push(...function(e,o,i,a){const r=t(e);let l=function(t,e,n){const o=["left","right"],i=["right","left"],a=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:o:e?o:i;case"left":case"right":return e?a:r;default:return[]}}(n(e),"start"===i,a);return r&&(l=l.map((t=>t+"-"+r)),o&&(l=l.concat(l.map(d)))),l}(m,v,b,P));const T=[m,...k],D=await s(a,R),O=[];let L=(null==(r=c.flip)?void 0:r.overflows)||[];if(y&&O.push(D[A]),x){const{main:n,cross:i}=function(n,i,a){void 0===a&&(a=!1);const r=t(n),l=o(n),s=e(l);let c="x"===l?r===(a?"end":"start")?"right":"left":"start"===r?"bottom":"top";return i.reference[s]>i.floating[s]&&(c=p(c)),{main:c,cross:p(c)}}(l,f,P);O.push(D[n],D[i])}if(L=[...L,{placement:l,overflows:O}],!O.every((t=>t<=0))){var B,S;const t=((null==(B=c.flip)?void 0:B.index)||0)+1,e=T[t];if(e)return{data:{index:t,overflows:L},reset:{placement:e}};let n=null==(S=L.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:S.placement;if(!n)switch(w){case"bestFit":{var C;const t=null==(C=L.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:C[0];t&&(n=t);break}case"initialPlacement":n=m}if(l!==n)return{reset:{placement:n}}}return{}}}},h=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(i){const{x:a,y:r}=i,l=await async function(e,i){const{placement:a,platform:r,elements:l}=e,s=await(null==r.isRTL?void 0:r.isRTL(l.floating)),c=n(a),f=t(a),m="x"===o(a),u=["left","top"].includes(c)?-1:1,g=s&&m?-1:1,p="function"==typeof i?i(e):i;let{mainAxis:y,crossAxis:d,alignmentAxis:x}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return f&&"number"==typeof x&&(d="end"===f?-1*x:x),m?{x:d*g,y:y*u}:{x:y*u,y:d*g}}(i,e);return{x:a+l.x,y:r+l.y,data:l}}}};const w=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:a,placement:r}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:f={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...u}=t,g={x:i,y:a},p=await s(e,u),y=o(n(r)),d=function(t){return"x"===t?"y":"x"}(y);let x=g[y],h=g[d];if(l){const t="y"===y?"bottom":"right";x=m(x+p["y"===y?"top":"left"],x,x-p[t])}if(c){const t="y"===d?"bottom":"right";h=m(h+p["y"===d?"top":"left"],h,h-p[t])}const w=f.fn({...e,[y]:x,[d]:h});return{...w,data:{x:w.x-i,y:w.y-a}}}}};export{h as D,x as b,w as k,l,a as r,s,u};
